!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("rxjs"),require("@angular/platform-browser"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs","@angular/platform-browser","@angular/common"],n):n(t.ngxNotify={},t.ng.core,t.rxjs,t.ng.platformBrowser,t.ng.common)}(this,function(t,e,s,n,i){"use strict";var o={alert:'\n    <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n      <path d="M0 0h24v24H0z" fill="none"/>\n      <path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>\n    </svg>',error:'\n    <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M512 937.19552c-234.83392 0-425.19552-190.36672-425.19552-425.19552 0-234.8288 190.36672-425.19552 425.19552-425.19552 234.8288 0 425.20064 190.36672 425.20064 425.19552S746.8288 937.19552 512 937.19552z m0-797.24544c-205.47072 0-372.04992 166.57408-372.04992 372.04992 0 205.47072 166.5792 372.0448 372.04992 372.0448s372.0448-166.57408 372.0448-372.0448S717.47072 139.95008 512 139.95008z m37.7344 372.18816l112.59392 112.61952c10.37824 10.36288 10.37824 27.19744 0 37.57568s-27.20768 10.37824-37.57568 0l-112.61952-112.59392-113.3568 113.3568a26.75712 26.75712 0 0 1-37.87264 0 26.76224 26.76224 0 0 1 0-37.86752L474.2656 511.8464 361.66656 399.24736a26.5728 26.5728 0 1 1 37.5808-37.5808L511.8464 474.2656l114.20672-114.20672a26.78784 26.78784 0 0 1 37.87264 37.888l-114.19136 114.19136z"></path></svg>\n    ',info:'\n    <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n      <path d="M0 0h24v24H0z" fill="none"/>\n      <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/>\n    </svg>\n    ',success:'\n    <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n      <path d="M0 0h24v24H0z" fill="none"/>\n      <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>\n    </svg>\n    '},r=function(){this.container=null},a=function(){function t(t,n,e,i){this.resolver=t,this.applicationRef=n,this.injector=e,this.config=i,this.emitter=new s.Subject,this.icons=o,i&&(this.container=i.container)}return t.prototype.set=function(t,n){return void 0===n&&(n=!0),this.notifyHolderComponent||(this.notifyHolderComponent=this.createNotifyHolder(),this.updateSetting({})),n&&((t=Object.assign({},this.config.notify,t)).id=t.id?t.id:Math.random().toString(36).substring(3),t.click=new e.EventEmitter),this.emitter.next({command:"set",notify:t,add:n}),t},t.prototype.updateSetting=function(t){this.emitter.next({command:"options",holderOptions:Object.assign({},this.config.options,t)})},t.prototype.createNotifyHolder=function(){var t=this,n=this.resolver.resolveComponentFactory(c).create(this.injector),e=n.hostView.rootNodes[0];return this.container||(this.container=document.body),this.applicationRef.attachView(n.hostView),n.onDestroy(function(){t.applicationRef.detachView(n.hostView)}),this.container.appendChild(e),n.instance},t.prototype.getChangeEmitter=function(){return this.emitter},t.prototype.success=function(t,n,e){return this.set(Object.assign({},e,{title:t,content:n||"",type:"success",icon:this.icons.success}))},t.prototype.error=function(t,n,e){return this.set(Object.assign({},e,{title:t,content:n||"",type:"error",icon:this.icons.error}))},t.prototype.alert=function(t,n,e){return this.set(Object.assign({},e,{title:t,content:n||"",type:"alert",icon:this.icons.alert}))},t.prototype.info=function(t,n,e){return this.set(Object.assign({},e,{title:t,content:n||"",type:"info",icon:this.icons.info}))},t.prototype.bare=function(t,n,e,i){return this.set(Object.assign({},i,{title:t,content:n||"",type:e}))},t.prototype.html=function(t,n,e,i,o){return this.set(Object.assign({},o,{title:t,content:n||"",html:e,type:i}))},t.prototype.remove=function(t){this.emitter.next({command:"remove",id:t})},t.prototype.clear=function(){this.emitter.next({command:"clear"})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.ApplicationRef},{type:e.Injector},{type:r,decorators:[{type:e.Optional}]}]},t}(),c=function(){function t(t){var n=this;this.notifies=[],this.styles={},this.listener=t.get(a).getChangeEmitter().subscribe(function(t){switch(t.command){case"clear":n.notifies=[];break;case"remove":n.remove(t.id);break;case"set":t.add?n.add(t.notify):n.defaultBehavior(t);break;case"options":n.options=Object.assign({lastOnBottom:!0,minWidth:300,maxWidth:300,maxStack:8,position:["right","bottom"],offset:[20,20],zIndex:1031},t.holderOptions),n.styles={"z-index":n.options.zIndex,"min-width.px":n.options.minWidth,"max-width.px":n.options.maxWidth},n.styles[n.options.position[0]+".px"]=n.options.offset[0],n.styles[n.options.position[1]+".px"]=n.options.offset[1];break;default:n.defaultBehavior(t)}})}return t.prototype.ngOnInit=function(){},t.prototype.defaultBehavior=function(t){if(this.notifies.splice(this.notifies.indexOf(t.notify),1),t.notify.onDestroy||this.options.onDestroy){var n=this.getEmit(t.notify,!1);t.notify.onDestroy&&t.notify.onDestroy(n),this.options.onDestroy&&this.options.onDestroy(n)}},t.prototype.getEmit=function(t,n){var e={createdOn:t.createdOn,id:t.id,type:t.type,icon:t.icon,title:t.title,content:t.content,html:t.html};return n||(e.destroyedOn=new Date),e},t.prototype.remove=function(e){var i=0,o=!1;this.notifies.forEach(function(t,n){t.id===e&&(i=n,o=!0)}),o&&this.notifies.splice(i,1)},t.prototype.add=function(t){if(!(t=Object.assign({type:"success",timeout:3e3,pauseOnHover:!0,progress:!1,clickToClose:!0,theme:"default",animate_in:"notify-fade-in",animate_out:"notify-fade-out",createdOn:new Date},t)).html)switch(t.theme){case"bootstrap":t.html='<div class="alert alert-{bstype}" role="alert"><strong>{title}</strong> {content}</div>';break;default:t.html='<div class="notify-title">{title}</div><div class="notify-content">{content}</div><div class="notify-icon">{icon}</div>'}if(this.options.lastOnBottom?(this.notifies.length>=this.options.maxStack&&this.notifies.splice(0,1),this.notifies.push(t)):(this.notifies.length>=this.options.maxStack&&this.notifies.splice(this.notifies.length-1,1),this.notifies.splice(0,0,t)),t.onCreate||this.options.onCreate){var n=this.getEmit(t,!0);t.onCreate&&t.onCreate(n),this.options.onCreate&&this.options.onCreate(n)}},t.prototype.ngOnDestroy=function(){this.listener&&this.listener.unsubscribe()},t.decorators=[{type:e.Component,args:[{selector:"notify-holder",template:'<div class="notifies" [ngStyle]="styles" [ngClass]="options.position" [class]="options.className"> <notify *ngFor="let n of notifies; let i = index" [item]="n"></notify> </div> ',styles:[".notifies {\n  position: fixed;\n}\n.notify {\n  width: 100%;\n  box-sizing: border-box;\n  position: relative;\n  margin-bottom: 10px;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.5s;\n}\n.notify-theme-default {\n  padding: 10px 20px;\n}\n.notify-theme-default.notify-alert {\n  background: #ffdb5b;\n}\n.notify-theme-default.notify-alert .notify-progress span {\n  background: #edc242;\n}\n.notify-theme-default.notify-success {\n  background: #8bc34a;\n}\n.notify-theme-default.notify-success .notify-progress span {\n  background: #689f38;\n}\n.notify-theme-default.notify-error {\n  background: #f44336;\n}\n.notify-theme-default.notify-error .notify-progress span {\n  background: #d32f2f;\n}\n.notify-theme-default.notify-info {\n  background: #03a9f4;\n}\n.notify-theme-default.notify-info .notify-progress span {\n  background: #0288d1;\n}\n.notify-theme-bootstrap.notify-alert .notify-progress span {\n  background: #edc242;\n}\n.notify-theme-bootstrap.notify-success .notify-progress span {\n  background: #689f38;\n}\n.notify-theme-bootstrap.notify-error .notify-progress span {\n  background: #d32f2f;\n}\n.notify-theme-bootstrap.notify-info .notify-progress span {\n  background: #0288d1;\n}\n.notify-title {\n  margin: 0;\n  padding: 0;\n  line-height: 30px;\n  font-size: 16px;\n  font-weight: bold;\n}\n.notify-content {\n  margin: 0;\n  font-size: 14px;\n  padding: 0 50px 0 0;\n  line-height: 20px;\n}\n.notify-icon {\n  position: absolute;\n  box-sizing: border-box;\n  top: 0;\n  right: 0;\n  height: 100%;\n  max-width: 70px;\n  width: 100%;\n}\n.notify-icon svg {\n  width: 100%;\n  height: 100%;\n  padding: 10px;\n  fill: #fff;\n}\n.notify-icon > * {\n  max-width: 70px;\n}\n.notify-progress {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n}\n.notify-progress span {\n  float: left;\n  height: 100%;\n}\n.notify-rtl {\n  direction: rtl;\n}\n.notify-rtl .notify-title {\n  padding-left: 50px;\n}\n.notify-rtl .notify-content {\n  padding: 0 0 0 50px;\n}\n.notify-rtl .notify-icon {\n  left: 0;\n  right: auto;\n}\n.notify-fade-in {\n  animation-duration: 1s;\n  animation-fill-mode: both;\n  -webkit-animation-name: fadeIn;\n  animation-name: fadeIn;\n}\n.notify-fade-out {\n  animation-duration: 1s;\n  animation-fill-mode: both;\n  -webkit-animation-name: fadeOut;\n  animation-name: fadeOut;\n}\n@-webkit-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@-webkit-keyframes fadeOut {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes fadeOut {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n"],encapsulation:e.ViewEncapsulation.None,preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:e.Injector}]},t}(),f=function(){function t(t,n,e){var i=this;this.sanitizer=t,this.zone=n,this.notifyService=e,this.classes={},this.stopTime=!1,this.count=0,this.progressWidth=0,this.instance=function(){i.zone.runOutsideAngular(function(){i.zone.run(function(){return i.diff=(new Date).getTime()-i.start-i.count*i.speed}),i.count++>=i.steps?i.zone.run(function(){i.remove()}):i.stopTime||(i.item.progress&&i.zone.run(function(){return i.progressWidth+=100/i.steps}),i.timer=setTimeout(i.instance,i.speed-i.diff))})}}return t.prototype.ngOnInit=function(){var e=this;switch(this.item.theme){case"bootstrap":switch(this.item.type){case"alert":this.item.bstype="warning";break;case"error":this.item.bstype="danger";break;default:this.item.bstype=this.item.type}}this.html=this.sanitizer.bypassSecurityTrustHtml(this.item.html.replace(/\{([a-z]+)\}/g,function(t,n){return e.item[n]||""})),this.classes["notify-theme-"+this.item.theme]=!0,(this.classes["notify-"+this.item.type]=!0)===this.item.rtl&&(this.classes["notify-rtl"]=!0),this.item.animate_in&&(this.classes.animated=!0,this.classes[this.item.animate_in]=!0),this.item.className&&(this.classes[this.item.className]=!0),0<this.item.timeout&&this.startTimeout()},t.prototype.startTimeout=function(){var t=this;this.steps=this.item.timeout/10,this.speed=this.item.timeout/this.steps,this.start=(new Date).getTime(),this.zone.runOutsideAngular(function(){return t.timer=setTimeout(t.instance,t.speed)})},t.prototype.onEnter=function(){this.item.pauseOnHover&&(this.stopTime=!0)},t.prototype.onLeave=function(){this.item.pauseOnHover&&(this.stopTime=!1,setTimeout(this.instance,this.speed-this.diff))},t.prototype.onClick=function(t){this.item.click.emit(t),this.item.clickToClose&&this.remove()},t.prototype.remove=function(){var t=this;this.item.animate_out?(this.classes[this.item.animate_in]=!1,this.classes[this.item.animate_out]=!0,this.zone.runOutsideAngular(function(){setTimeout(function(){t.zone.run(function(){return t.notifyService.set(t.item,!1)})},500)})):this.notifyService.set(this.item,!1)},t.prototype.ngOnDestroy=function(){clearTimeout(this.timer)},t.decorators=[{type:e.Component,args:[{selector:"notify",template:'<div class="notify" (click)="onClick($event)" [ngClass]="classes" [class]="animate" (mouseenter)="onEnter()" (mouseleave)="onLeave()"> <div [innerHTML]="html"></div> <div class="notify-progress" *ngIf="item.progress"> <span [ngStyle]="{\'width\': progressWidth + \'%\'}"></span> </div> </div> ',preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:n.DomSanitizer},{type:e.NgZone},{type:a}]},t.propDecorators={item:[{type:e.Input}]},t}(),p=function(){function t(){this.permission=this.isSupported()?Notification.permission:"denied"}return t.prototype.requestPermission=function(){var n=this;this.isSupported()&&Notification.requestPermission(function(t){return n.permission=t})},t.prototype.isSupported=function(){return"Notification"in window},t.prototype.create=function(t,i){var o=this;return new s.Observable(function(n){o.isSupported()||(n.error("不支持"),n.complete()),"granted"!==o.permission&&(n.error("用户未授权"),n.complete());var e=new Notification(t,i);e.onshow=function(t){return n.next({notification:e,event:t})},e.onclick=function(t){return n.next({notification:e,event:t})},e.onerror=function(t){return n.error({notification:e,event:t})},e.onclose=function(){return n.complete()}})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}(),h=function(){function n(){}return n.forRoot=function(t){return{ngModule:n,providers:[{provide:r,useValue:t}]}},n.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule],declarations:[c,f],providers:[a,p],entryComponents:[c,f]}]}],n}();t.defaultIcons=o,t.NotifyHolderComponent=c,t.NotifyComponent=f,t.NotifyServiceConfig=r,t.NotifyService=a,t.NotifyPushService=p,t.NotifyModule=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=notify.umd.min.js.map
