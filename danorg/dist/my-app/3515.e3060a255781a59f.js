"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3515],{3515:(H,g,a)=>{a.r(g),a.d(g,{CategoryModule:()=>R});var s=a(6895),d=a(1066),x=a(3900),u=a(3293),t=a(4650),f=a(8227),v=a(7185),h=a(5506),Z=a(9603),T=a(5211);const A=function(o){return["/danshop/category",o]};function y(o,n){if(1&o&&(t.TgZ(0,"li",13)(1,"a",19),t._uU(2),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,A,e.slug)),t.xp6(1),t.Oqu(e.name)}}function C(o,n){if(1&o&&(t.TgZ(0,"li",20),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function I(o,n){if(1&o&&(t.ynx(0),t.YNc(1,y,3,4,"li",17),t.YNc(2,C,2,1,"li",18),t.BQk()),2&o){const e=n.$implicit,i=n.last;t.xp6(1),t.Q6J("ngIf",!i&&"__root_collection__"!==e.name),t.xp6(1),t.Q6J("ngIf",i)}}function b(o,n){if(1&o&&(t.TgZ(0,"ul")(1,"li",13)(2,"a",14),t._UZ(3,"i",15),t._uU(4," Home"),t.qZA()(),t.YNc(5,I,3,2,"ng-container",16),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.collectionData.breadcrumbs)}}function N(o,n){if(1&o&&(t.TgZ(0,"div",24),t._UZ(1,"img",25),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.s9C("src",e.collectionData.featuredAsset.source,t.LSH)}}function w(o,n){if(1&o&&(t.TgZ(0,"div",6)(1,"h2",21),t._uU(2),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,N,2,1,"div",22),t._UZ(5,"div",23),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.collectionData.name),t.xp6(2),t.Q6J("ngIf",null!=e.collectionData.featuredAsset),t.xp6(1),t.Q6J("innerHTML",e.collectionData.description,t.oJD)}}const _=function(o){return["/danshop/product-details/",o]};function J(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"a",19),t._UZ(2,"img",41),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,_,e.slug)),t.xp6(1),t.Q6J("src",e.productAsset.preview,t.LSH)}}function q(o,n){if(1&o&&(t.TgZ(0,"a",19),t._UZ(1,"img",42),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,_,e.slug))}}function S(o,n){if(1&o&&(t.TgZ(0,"p",43)(1,"ins"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"small"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("ZAR ",t.xi3(3,2,e.priceWithTax.value/100,"1.2-2"),""),t.xp6(3),t.hij("Ex Tax: ZAR ",t.xi3(6,5,e.price.value/100,"1.2-2"),"")}}function P(o,n){if(1&o&&(t.TgZ(0,"p",43)(1,"ins"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"small"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("ZAR ",t.xi3(3,2,e.priceWithTax.min/100,"1.2-2"),""),t.xp6(3),t.hij("Ex Tax: ZAR ",t.xi3(6,5,e.price.min/100,"1.2-2"),"")}}function U(o,n){if(1&o&&(t.TgZ(0,"p",43)(1,"ins"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"small"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("ZAR ",t.xi3(3,2,e.priceWithTax.min/100,"1.2-2"),""),t.xp6(3),t.hij("Ex Tax: ZAR ",t.xi3(6,5,e.price.min/100,"1.2-2"),"")}}function L(o,n){1&o&&(t.TgZ(0,"p",43)(1,"ins"),t._uU(2,"Out of stock"),t.qZA()())}function Q(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.addToCart(c.productVariantId,1))}),t.ALo(1,"replace"),t._UZ(2,"i",46),t.ALo(3,"replace"),t.qZA()}if(2&o){const e=t.oxw(2).$implicit;t.uIk("data-productId",e.productId)("data-productName",e.productName)("data-productPrice",t.lcZ(1,6,e.priceWithTax.min/100)),t.xp6(2),t.uIk("data-productId",e.productId)("data-productName",e.productName)("data-productPrice",t.lcZ(3,8,e.priceWithTax.min/100))}}function Y(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.navigateToRoute(c.slug))}),t.ALo(1,"replace"),t._UZ(2,"i",46),t.ALo(3,"replace"),t.qZA()}if(2&o){const e=t.oxw(2).$implicit;t.uIk("data-productId",e.productId)("data-productName",e.productName)("data-productPrice",t.lcZ(1,7,e.priceWithTax.min/100))("data-productSlug",e.slug),t.xp6(2),t.uIk("data-productId",e.productId)("data-productName",e.productName)("data-productPrice",t.lcZ(3,9,e.priceWithTax.min/100))}}function k(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.navigateToRoute(c.slug))}),t.ALo(1,"replace"),t._UZ(2,"i",46),t.ALo(3,"replace"),t.qZA()}if(2&o){const e=t.oxw(2).$implicit;t.uIk("data-productId",e.productId)("data-productName",e.productName)("data-productPrice",t.lcZ(1,7,e.priceWithTax.min/100))("data-productSlug",e.slug),t.xp6(2),t.uIk("data-productId",e.productId)("data-productName",e.productName)("data-productPrice",t.lcZ(3,9,e.priceWithTax.min/100))}}function W(o,n){if(1&o&&(t.YNc(0,Q,4,10,"ng-template",35),t.YNc(1,Y,4,11,"ng-template",36),t.YNc(2,k,4,11,"ng-template",null,44,t.W1O)),2&o){const e=t.MAs(3),i=t.oxw().$implicit;t.Q6J("ngIf","SinglePrice"===i.priceWithTax.__typename),t.xp6(1),t.Q6J("ngIf",i.priceWithTax.min===i.priceWithTax.max)("ngIfElse",e)}}function $(o,n){if(1&o&&(t.TgZ(0,"div",27)(1,"div",28)(2,"div",29),t.YNc(3,J,3,4,"ng-container",30),t.YNc(4,q,2,3,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(6,"div",32)(7,"h4",33)(8,"a",34),t._uU(9),t.qZA()(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"slice"),t.ALo(13,"removeHtmlTags"),t.qZA(),t.YNc(14,S,7,8,"ng-template",35),t.YNc(15,P,7,8,"ng-template",36),t.YNc(16,U,7,8,"ng-template",null,37,t.W1O),t.YNc(18,L,3,0,"ng-template",35),t.TgZ(19,"div",38),t.YNc(20,W,4,3,"ng-template",35),t.TgZ(21,"button",39),t._UZ(22,"i",40),t.qZA()()()()()),2&o){const e=n.$implicit,i=t.MAs(5),c=t.MAs(17);t.xp6(3),t.Q6J("ngIf",e.productAsset.preview)("ngIfElse",i),t.xp6(5),t.Q6J("routerLink",t.VKq(16,_,e.slug)),t.xp6(1),t.Oqu(e.productName),t.xp6(2),t.hij("",t.Dn7(12,10,t.lcZ(13,14,e.description),0,100),"..."),t.xp6(3),t.Q6J("ngIf","SinglePrice"===e.priceWithTax.__typename),t.xp6(1),t.Q6J("ngIf",e.priceWithTax.min===e.priceWithTax.max)("ngIfElse",c),t.xp6(3),t.Q6J("ngIf",0==e.inStock),t.xp6(2),t.Q6J("ngIf",1==e.inStock)}}function O(o,n){if(1&o&&(t.TgZ(0,"div",4),t.YNc(1,$,23,18,"div",26),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.allProducts)}}const D=u.Ps`
	query GetProducts($collectionId: ID!){
	  search(input: { collectionId: $collectionId, groupByProduct: true, take:100 }) {
		items {
			productId
			slug
			productName
			description
			inStock
			currencyCode
			productVariantId
			productVariantName
			price {
				... on PriceRange {
					min
					max
					__typename
				}
				__typename
				... on SinglePrice {
					value
					__typename
				}
			  }
			  priceWithTax {
				... on PriceRange {
					min
					max
					__typename
				}
				__typename
					... on SinglePrice {
					value
				  __typename
				}	
			  }
			productAsset {
				id
				preview
				focalPoint {
					x
					y
					__typename
				}
				__typename
			}
			__typename
		}
		totalItems
		facetValues {
			count
			facetValue {
				id
				name
				facet {
					id
					name
					__typename
				}
				__typename
			}
			__typename
		}
		__typename
	  }
	}

`,E=u.Ps`
	query GetCollection($collectionSlug: String!){
		collection(slug: $collectionSlug) {
            id
            name
            slug
            description
			featuredAsset{
              source
            }
            breadcrumbs {
                id
                slug
                name
            }
        }
	}
`,M=[{path:"",component:(()=>{class o{constructor(e,i,c,r,l,p,m){this.apollo=e,this.cartService=i,this.toastrService=c,this.decimalPipe=r,this.route=l,this.router=p,this.stateService=m,this.allProducts=[],this.collectionData=null,this.collectionId=null,this.product={id:1,name:"Product 1",price:10}}ngOnInit(){this.route.paramMap.pipe((0,x.w)(e=>{const i=e.get("slug");return console.log(i),this.apollo.watchQuery({query:E,variables:{collectionSlug:i}}).valueChanges})).subscribe(({data:e,loading:i})=>{console.log(i),this.collectionId=e.collection.id,this.collectionData=e.collection,console.log(this.collectionData),this.apollo.watchQuery({query:D,variables:{collectionId:this.collectionId}}).valueChanges.subscribe(({data:c,loading:r})=>{console.log(r),this.allProducts=c.search.items,console.log(this.allProducts)})})}navigateToRoute(e){this.router.navigate(["/danshop/product-details",e])}removeComma(e){return e.replace(",","")}addToCart(e,i){this.cartService.addItemToOrder(e,i).subscribe(l=>{if("id"in l&&l.id){const p=l;this.stateService.setState("activeOrderId",p?p.id:null),e&&(console.log(p,p.id+" Success"),this.cartService.getActiveOrder().subscribe(m=>{this.cartService.updateActiveOrder(m)}),this.toastrService.success("Product Added to Cart","Success!"))}else this.toastrService.error(l.message,"Error!")},l=>{console.error("API Error:",l)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(u._M),t.Y36(f.N),t.Y36(v._W),t.Y36(s.JJ),t.Y36(d.gz),t.Y36(d.F0),t.Y36(h.b))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-category"]],decls:26,vars:3,consts:[[1,"breadcrumb"],[1,"container"],[4,"ngIf"],[1,"mid-inner"],[1,"row"],["class","col-sm-12 full-wrap",4,"ngIf"],[1,"col-sm-12","full-wrap"],[1,"products-wrap"],["class","row",4,"ngIf"],[1,"tag-wrap"],[1,"col-sm-12"],[1,"inner"],["href","#",1,"btn"],[1,"breadcrumb-item"],["routerLink","/danshop"],["aria-hidden","true",1,"fa","fa-home"],[4,"ngFor","ngForOf"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"collection-title",2,"line-height","1","color","#000","font-size","28px","margin-bottom","35px"],["class","col-sm-2 collection-image",4,"ngIf"],[1,"col-sm-10","collection-description",3,"innerHTML"],[1,"col-sm-2","collection-image"],["alt","",3,"src"],["class","col-sm-3 pw-coll",4,"ngFor","ngForOf"],[1,"col-sm-3","pw-coll"],[1,"item"],[1,"image"],[4,"ngIf","ngIfElse"],["noPreview",""],[1,"caption"],[2,"min-height","39px"],[1,"woocommerce-LoopProduct-link",3,"routerLink"],[3,"ngIf"],[3,"ngIf","ngIfElse"],["range",""],[1,"button-group"],["type","button","data-toggle","tooltip","title","Add to Wish List"],["aria-hidden","true",1,"fa","fa-heart"],["alt","","width","100%",3,"src"],["src","assets/images/no-image.jpg","alt","","width","100%"],[1,"price"],["range2",""],["type","button","data-toggle","tooltip","title","Add to Cart",3,"click"],["aria-hidden","true",1,"fa","fa-shopping-cart"]],template:function(i,c){1&i&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,b,6,1,"ul",2),t.qZA()(),t.TgZ(3,"section",3)(4,"div",1)(5,"div",4),t.YNc(6,w,6,3,"div",5),t.TgZ(7,"div",6)(8,"div",7),t.YNc(9,O,2,1,"div",8),t.qZA()()()()(),t.TgZ(10,"section",9)(11,"div",1)(12,"div",4)(13,"div",10)(14,"div",11)(15,"h2"),t._uU(16,"DAN Shop Emergency Hotline "),t.TgZ(17,"span"),t._uU(18,"Call for Assistance"),t.qZA()(),t.TgZ(19,"p"),t._uU(20,"DAN's Emergency Hotline staff members are on call 24 hours a day, 365 days a year, to provide information, assist with care coordination and evacuation assistance."),t.qZA(),t.TgZ(21,"h2"),t._uU(22,"27 11 266 4900"),t.qZA(),t.TgZ(23,"p")(24,"a",12),t._uU(25,"Shop Now"),t.qZA()()()()()()()),2&i&&(t.xp6(2),t.Q6J("ngIf",c.collectionData),t.xp6(4),t.Q6J("ngIf",c.collectionData),t.xp6(3),t.Q6J("ngIf",c.allProducts))},dependencies:[s.sg,s.O5,d.rH,s.OU,s.JJ,Z.$,T.A]})}return o})()}];let F=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(M),d.Bz]})}return o})(),R=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[s.JJ],imports:[s.ez,F]})}return o})()}}]);