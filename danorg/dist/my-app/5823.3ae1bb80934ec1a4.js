"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[5823],{5823:(O,d,s)=>{s.r(d),s.d(d,{LoginModule:()=>T});var p=s(6895),a=s(1066),r=s(433),t=s(4650),u=s(7185),h=s(529),f=s(1188);function _(o,g){1&o&&(t.ynx(0),t._uU(1,"Email is required."),t.BQk())}function b(o,g){1&o&&(t.ynx(0),t._uU(1,"Invalid email address."),t.BQk())}function C(o,g){if(1&o&&(t.TgZ(0,"small",21),t.YNc(1,_,2,0,"ng-container",22),t.YNc(2,b,2,0,"ng-container",22),t.qZA()),2&o){const e=t.oxw();let n,i;t.xp6(1),t.Q6J("ngIf",null==(n=e.loginForm.get("email"))?null:n.hasError("required")),t.xp6(1),t.Q6J("ngIf",(null==(i=e.loginForm.get("email"))?null:i.hasError("email"))&&!(null!=(i=e.loginForm.get("email"))&&i.hasError("required")))}}function x(o,g){1&o&&(t.TgZ(0,"small",21),t._uU(1,"Password is required."),t.qZA())}function v(o,g){1&o&&(t.TgZ(0,"small",21),t._uU(1,"Membership is required."),t.qZA())}const Z=[{path:"",component:(()=>{class o{constructor(e,n,i,l,m,c){this.router=e,this.route=n,this.fb=i,this.toastr=l,this.http=m,this.authService=c,this.loginForm=new r.cw({}),this.isNextButtonClicked=!1,this.apiUrl="http://157.245.36.128:4500/login_frontend/error"}ngOnInit(){this.loginForm=this.fb.group({email:["",[r.kI.required,r.kI.email]],password:["",r.kI.required],choose_membership:["",r.kI.required]}),Object.keys(this.loginForm.controls).forEach(e=>{this.loginForm.get(e)?.markAsTouched()})}postData(e){const n=this.loginForm.get("choose_membership")?.value;switch(console.log(n),n){case"student":this.apiUrl="http://157.245.36.128:4500/login_frontend/student";break;case"annual":this.apiUrl="http://157.245.36.128:4500/login_frontend/annual";break;case"commercial":this.apiUrl="http://157.245.36.128:4500/login_frontend/commercial";break;case"temporary":this.apiUrl="http://157.245.36.128:4500/login_frontend/temporary";break;default:this.toastr.error("Oops! Something went wrong. Please try again later...","Error")}return this.http.post(this.apiUrl,e)}onSubmit(){if(this.loginForm.valid){const e=this.loginForm.value;console.log(e),this.postData(e).subscribe(n=>{console.log("Login success:",n),this.toastr.success(n.message,"Success"),this.authService.login(n.userId,e.email,e.choose_membership),setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3)},n=>{console.error("Error saving form data:",n),this.toastr.error("Invalid credentials","Error")})}else console.log("Form is invalid. Please check the errors."),this.toastr.error("Please fill in all required fields.","Error"),this.isNextButtonClicked=!0,this.highlightFirstInvalidControl()}highlightFirstInvalidControl(){const e=Object.keys(this.loginForm.controls).find(n=>this.loginForm.get(n)?.invalid);e&&this.loginForm.get(e)?.markAsTouched()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(a.F0),t.Y36(a.gz),t.Y36(r.qu),t.Y36(u._W),t.Y36(h.eN),t.Y36(f.$))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:45,vars:4,consts:[[1,"mid-wrap"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"login-padd"],[1,"form-group"],["id","message"],["name","editor","id","editor",1,"editor",3,"formGroup","ngSubmit"],[1,"main_login_bg"],[1,"text-danger"],["type","email","formControlName","email","id","email",1,"form-control"],["class","error text-danger",4,"ngIf"],["type","password","formControlName","password","id","password",1,"form-control"],["formControlName","choose_membership","id","choose_membership",1,"form-control"],["value",""],["value","annual"],["value","student"],["value","temporary"],["value","commercial"],[1,"form-group","mt-4"],["type","submit","data-label","Submit",1,"btn","btn-success","my-4"],[1,"error","text-danger"],[4,"ngIf"]],template:function(n,i){if(1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),t._uU(6,"Membership Login"),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"div",6),t.qZA(),t.TgZ(9,"form",7),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(10,"div",8)(11,"div",5)(12,"label"),t._uU(13,"Email Address "),t.TgZ(14,"span",9),t._uU(15,"*"),t.qZA()(),t._UZ(16,"input",10),t.YNc(17,C,3,2,"small",11),t.qZA(),t.TgZ(18,"div",5)(19,"label"),t._uU(20,"Password "),t.TgZ(21,"span",9),t._uU(22,"*"),t.qZA()(),t._UZ(23,"input",12),t.YNc(24,x,2,0,"small",11),t.qZA(),t.TgZ(25,"div",5)(26,"label"),t._uU(27,"Choose Membership "),t.TgZ(28,"span",9),t._uU(29,"*"),t.qZA()(),t.TgZ(30,"select",13)(31,"option",14),t._uU(32,"--Choose--"),t.qZA(),t.TgZ(33,"option",15),t._uU(34,"Annual"),t.qZA(),t.TgZ(35,"option",16),t._uU(36,"Student"),t.qZA(),t.TgZ(37,"option",17),t._uU(38,"Temporary"),t.qZA(),t.TgZ(39,"option",18),t._uU(40,"Commercial"),t.qZA()(),t.YNc(41,v,2,0,"small",11),t.qZA(),t.TgZ(42,"div",19)(43,"button",20),t._uU(44,"Submit"),t.qZA()()()()()()()()()),2&n){let l,m,c;t.xp6(9),t.Q6J("formGroup",i.loginForm),t.xp6(8),t.Q6J("ngIf",i.isNextButtonClicked&&((null==(l=i.loginForm.get("email"))?null:l.hasError("required"))||(null==(l=i.loginForm.get("email"))?null:l.hasError("email")))),t.xp6(7),t.Q6J("ngIf",i.isNextButtonClicked&&(null==(m=i.loginForm.get("password"))?null:m.hasError("required"))),t.xp6(17),t.Q6J("ngIf",i.isNextButtonClicked&&(null==(c=i.loginForm.get("choose_membership"))?null:c.hasError("required")))}},dependencies:[p.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:['section.mid-wrap[_ngcontent-%COMP%]{padding:60px 0 50px}.login-padd[_ngcontent-%COMP%]{box-shadow:0 0 15px #0000001a;padding:30px;margin:0 25%}.login-padd[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;font-size:24px;font-weight:700;position:relative;text-align:left;margin:0 0 15px}.login-padd[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";background:#e20909;display:inline-block;vertical-align:middle;height:3px;width:40px;margin:0 10px}.login-padd[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background:#f0f2f8;padding:30px}.login-padd[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:25px;position:relative}.login-padd[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{position:absolute;font-size:13px}.form-actions[_ngcontent-%COMP%]{background:#002447;padding:20px;margin:30px 0 0;text-align:center}.login-padd[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;height:44px;font-size:14px;border-radius:0}.login-padd[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:400;margin:0 0 5px;font-size:15px}.login-padd[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{width:100%;border-radius:0;text-transform:uppercase;font-weight:700;font-family:open_sansbold;font-weight:400;border:0;box-shadow:none;padding:12px 10px;letter-spacing:1px}.login-padd[_ngcontent-%COMP%]   div.form-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}']})}return o})()}];let M=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(Z),a.Bz]})}return o})(),T=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[p.ez,M]})}return o})()}}]);