import { marker as _ } from '@biesbjerg/ngx-translate-extract-marker';
import { DataService, NotificationService, Permission } from '@vendure/admin-ui/core';
export const removeZoneMembersBulkAction = {
    location: 'zone-members-list',
    label: _('settings.remove-from-zone'),
    icon: 'trash',
    iconClass: 'is-danger',
    requiresPermission: Permission.UpdateCustomerGroup,
    onClick: ({ injector, selection, hostComponent, clearSelection }) => {
        const dataService = injector.get(DataService);
        const notificationService = injector.get(NotificationService);
        const zone = hostComponent.activeZone;
        const memberIds = selection.map(s => s.id);
        dataService.settings.removeMembersFromZone(zone.id, memberIds).subscribe({
            complete: () => {
                notificationService.success(_(`settings.remove-countries-from-zone-success`), {
                    countryCount: memberIds.length,
                    zoneName: zone.name,
                });
                hostComponent.refresh();
                clearSelection();
            },
        });
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9uZS1tZW1iZXItbGlzdC1idWxrLWFjdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL3NldHRpbmdzL3NyYy9jb21wb25lbnRzL3pvbmUtbWVtYmVyLWxpc3Qvem9uZS1tZW1iZXItbGlzdC1idWxrLWFjdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQztBQUN0RSxPQUFPLEVBQWMsV0FBVyxFQUFFLG1CQUFtQixFQUFFLFVBQVUsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBR2xHLE1BQU0sQ0FBQyxNQUFNLDJCQUEyQixHQUFvRDtJQUN4RixRQUFRLEVBQUUsbUJBQW1CO0lBQzdCLEtBQUssRUFBRSxDQUFDLENBQUMsMkJBQTJCLENBQUM7SUFDckMsSUFBSSxFQUFFLE9BQU87SUFDYixTQUFTLEVBQUUsV0FBVztJQUN0QixrQkFBa0IsRUFBRSxVQUFVLENBQUMsbUJBQW1CO0lBQ2xELE9BQU8sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLEVBQUUsRUFBRTtRQUNoRSxNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzlDLE1BQU0sbUJBQW1CLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRTlELE1BQU0sSUFBSSxHQUFHLGFBQWEsQ0FBQyxVQUFVLENBQUM7UUFDdEMsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUUzQyxXQUFXLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDO1lBQ3JFLFFBQVEsRUFBRSxHQUFHLEVBQUU7Z0JBQ1gsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyw2Q0FBNkMsQ0FBQyxFQUFFO29CQUMxRSxZQUFZLEVBQUUsU0FBUyxDQUFDLE1BQU07b0JBQzlCLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSTtpQkFDdEIsQ0FBQyxDQUFDO2dCQUNILGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDeEIsY0FBYyxFQUFFLENBQUM7WUFDckIsQ0FBQztTQUNKLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFya2VyIGFzIF8gfSBmcm9tICdAYmllc2JqZXJnL25neC10cmFuc2xhdGUtZXh0cmFjdC1tYXJrZXInO1xyXG5pbXBvcnQgeyBCdWxrQWN0aW9uLCBEYXRhU2VydmljZSwgTm90aWZpY2F0aW9uU2VydmljZSwgUGVybWlzc2lvbiB9IGZyb20gJ0B2ZW5kdXJlL2FkbWluLXVpL2NvcmUnO1xyXG5pbXBvcnQgeyBab25lTWVtYmVyLCBab25lTWVtYmVyTGlzdENvbXBvbmVudCB9IGZyb20gJy4vem9uZS1tZW1iZXItbGlzdC5jb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVpvbmVNZW1iZXJzQnVsa0FjdGlvbjogQnVsa0FjdGlvbjxab25lTWVtYmVyLCBab25lTWVtYmVyTGlzdENvbXBvbmVudD4gPSB7XHJcbiAgICBsb2NhdGlvbjogJ3pvbmUtbWVtYmVycy1saXN0JyxcclxuICAgIGxhYmVsOiBfKCdzZXR0aW5ncy5yZW1vdmUtZnJvbS16b25lJyksXHJcbiAgICBpY29uOiAndHJhc2gnLFxyXG4gICAgaWNvbkNsYXNzOiAnaXMtZGFuZ2VyJyxcclxuICAgIHJlcXVpcmVzUGVybWlzc2lvbjogUGVybWlzc2lvbi5VcGRhdGVDdXN0b21lckdyb3VwLFxyXG4gICAgb25DbGljazogKHsgaW5qZWN0b3IsIHNlbGVjdGlvbiwgaG9zdENvbXBvbmVudCwgY2xlYXJTZWxlY3Rpb24gfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGFTZXJ2aWNlID0gaW5qZWN0b3IuZ2V0KERhdGFTZXJ2aWNlKTtcclxuICAgICAgICBjb25zdCBub3RpZmljYXRpb25TZXJ2aWNlID0gaW5qZWN0b3IuZ2V0KE5vdGlmaWNhdGlvblNlcnZpY2UpO1xyXG5cclxuICAgICAgICBjb25zdCB6b25lID0gaG9zdENvbXBvbmVudC5hY3RpdmVab25lO1xyXG4gICAgICAgIGNvbnN0IG1lbWJlcklkcyA9IHNlbGVjdGlvbi5tYXAocyA9PiBzLmlkKTtcclxuXHJcbiAgICAgICAgZGF0YVNlcnZpY2Uuc2V0dGluZ3MucmVtb3ZlTWVtYmVyc0Zyb21ab25lKHpvbmUuaWQsIG1lbWJlcklkcykuc3Vic2NyaWJlKHtcclxuICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc3VjY2VzcyhfKGBzZXR0aW5ncy5yZW1vdmUtY291bnRyaWVzLWZyb20tem9uZS1zdWNjZXNzYCksIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5Q291bnQ6IG1lbWJlcklkcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgem9uZU5hbWU6IHpvbmUubmFtZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaG9zdENvbXBvbmVudC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBjbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxufTtcclxuIl19