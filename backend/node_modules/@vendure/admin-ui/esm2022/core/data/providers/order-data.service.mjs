import { ADD_ITEM_TO_DRAFT_ORDER, ADD_MANUAL_PAYMENT_TO_ORDER, ADD_NOTE_TO_ORDER, ADJUST_DRAFT_ORDER_LINE, APPLY_COUPON_CODE_TO_DRAFT_ORDER, CANCEL_ORDER, CANCEL_PAYMENT, CREATE_DRAFT_ORDER, CREATE_FULFILLMENT, DELETE_DRAFT_ORDER, DELETE_ORDER_NOTE, DRAFT_ORDER_ELIGIBLE_SHIPPING_METHODS, GET_ORDER, GET_ORDER_HISTORY, GET_ORDERS_LIST, MODIFY_ORDER, REFUND_ORDER, REMOVE_COUPON_CODE_FROM_DRAFT_ORDER, REMOVE_DRAFT_ORDER_LINE, SET_BILLING_ADDRESS_FOR_DRAFT_ORDER, SET_CUSTOMER_FOR_DRAFT_ORDER, SET_DRAFT_ORDER_SHIPPING_METHOD, SET_SHIPPING_ADDRESS_FOR_DRAFT_ORDER, SETTLE_PAYMENT, SETTLE_REFUND, TRANSITION_FULFILLMENT_TO_STATE, TRANSITION_ORDER_TO_STATE, TRANSITION_PAYMENT_TO_STATE, UPDATE_ORDER_CUSTOM_FIELDS, UPDATE_ORDER_NOTE, } from '../definitions/order-definitions';
export class OrderDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getOrders(options = { take: 10 }) {
        return this.baseDataService.query(GET_ORDERS_LIST, {
            options,
        });
    }
    getOrder(id) {
        return this.baseDataService.query(GET_ORDER, {
            id,
        });
    }
    getOrderHistory(id, options) {
        return this.baseDataService.query(GET_ORDER_HISTORY, {
            id,
            options,
        });
    }
    settlePayment(id) {
        return this.baseDataService.mutate(SETTLE_PAYMENT, {
            id,
        });
    }
    cancelPayment(id) {
        return this.baseDataService.mutate(CANCEL_PAYMENT, {
            id,
        });
    }
    transitionPaymentToState(id, state) {
        return this.baseDataService.mutate(TRANSITION_PAYMENT_TO_STATE, {
            id,
            state,
        });
    }
    createFulfillment(input) {
        return this.baseDataService.mutate(CREATE_FULFILLMENT, {
            input,
        });
    }
    transitionFulfillmentToState(id, state) {
        return this.baseDataService.mutate(TRANSITION_FULFILLMENT_TO_STATE, {
            id,
            state,
        });
    }
    cancelOrder(input) {
        return this.baseDataService.mutate(CANCEL_ORDER, {
            input,
        });
    }
    refundOrder(input) {
        return this.baseDataService.mutate(REFUND_ORDER, {
            input,
        });
    }
    settleRefund(input, orderId) {
        return this.baseDataService.mutate(SETTLE_REFUND, {
            input,
        });
    }
    addNoteToOrder(input) {
        return this.baseDataService.mutate(ADD_NOTE_TO_ORDER, {
            input,
        });
    }
    updateOrderNote(input) {
        return this.baseDataService.mutate(UPDATE_ORDER_NOTE, {
            input,
        });
    }
    deleteOrderNote(id) {
        return this.baseDataService.mutate(DELETE_ORDER_NOTE, {
            id,
        });
    }
    transitionToState(id, state) {
        return this.baseDataService.mutate(TRANSITION_ORDER_TO_STATE, {
            id,
            state,
        });
    }
    updateOrderCustomFields(input) {
        return this.baseDataService.mutate(UPDATE_ORDER_CUSTOM_FIELDS, {
            input,
        });
    }
    modifyOrder(input) {
        return this.baseDataService.mutate(MODIFY_ORDER, {
            input,
        });
    }
    addManualPaymentToOrder(input) {
        return this.baseDataService.mutate(ADD_MANUAL_PAYMENT_TO_ORDER, { input });
    }
    createDraftOrder() {
        return this.baseDataService.mutate(CREATE_DRAFT_ORDER);
    }
    deleteDraftOrder(orderId) {
        return this.baseDataService.mutate(DELETE_DRAFT_ORDER, { orderId });
    }
    addItemToDraftOrder(orderId, input) {
        return this.baseDataService.mutate(ADD_ITEM_TO_DRAFT_ORDER, { orderId, input });
    }
    adjustDraftOrderLine(orderId, input) {
        return this.baseDataService.mutate(ADJUST_DRAFT_ORDER_LINE, { orderId, input });
    }
    removeDraftOrderLine(orderId, orderLineId) {
        return this.baseDataService.mutate(REMOVE_DRAFT_ORDER_LINE, { orderId, orderLineId });
    }
    setCustomerForDraftOrder(orderId, { customerId, input }) {
        return this.baseDataService.mutate(SET_CUSTOMER_FOR_DRAFT_ORDER, { orderId, customerId, input });
    }
    setDraftOrderShippingAddress(orderId, input) {
        return this.baseDataService.mutate(SET_SHIPPING_ADDRESS_FOR_DRAFT_ORDER, { orderId, input });
    }
    setDraftOrderBillingAddress(orderId, input) {
        return this.baseDataService.mutate(SET_BILLING_ADDRESS_FOR_DRAFT_ORDER, { orderId, input });
    }
    applyCouponCodeToDraftOrder(orderId, couponCode) {
        return this.baseDataService.mutate(APPLY_COUPON_CODE_TO_DRAFT_ORDER, { orderId, couponCode });
    }
    removeCouponCodeFromDraftOrder(orderId, couponCode) {
        return this.baseDataService.mutate(REMOVE_COUPON_CODE_FROM_DRAFT_ORDER, { orderId, couponCode });
    }
    getDraftOrderEligibleShippingMethods(orderId) {
        return this.baseDataService.query(DRAFT_ORDER_ELIGIBLE_SHIPPING_METHODS, { orderId });
    }
    setDraftOrderShippingMethod(orderId, shippingMethodId) {
        return this.baseDataService.mutate(SET_DRAFT_ORDER_SHIPPING_METHOD, { orderId, shippingMethodId });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXItZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9vcmRlci1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUNILHVCQUF1QixFQUN2QiwyQkFBMkIsRUFDM0IsaUJBQWlCLEVBQ2pCLHVCQUF1QixFQUN2QixnQ0FBZ0MsRUFDaEMsWUFBWSxFQUNaLGNBQWMsRUFDZCxrQkFBa0IsRUFDbEIsa0JBQWtCLEVBQ2xCLGtCQUFrQixFQUNsQixpQkFBaUIsRUFDakIscUNBQXFDLEVBQ3JDLFNBQVMsRUFDVCxpQkFBaUIsRUFDakIsZUFBZSxFQUNmLFlBQVksRUFDWixZQUFZLEVBQ1osbUNBQW1DLEVBQ25DLHVCQUF1QixFQUN2QixtQ0FBbUMsRUFDbkMsNEJBQTRCLEVBQzVCLCtCQUErQixFQUMvQixvQ0FBb0MsRUFDcEMsY0FBYyxFQUNkLGFBQWEsRUFDYiwrQkFBK0IsRUFDL0IseUJBQXlCLEVBQ3pCLDJCQUEyQixFQUMzQiwwQkFBMEIsRUFDMUIsaUJBQWlCLEdBQ3BCLE1BQU0sa0NBQWtDLENBQUM7QUFJMUMsTUFBTSxPQUFPLGdCQUFnQjtJQUN6QixZQUFvQixlQUFnQztRQUFoQyxvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7SUFBRyxDQUFDO0lBRXhELFNBQVMsQ0FBQyxVQUFvQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUU7UUFDdEQsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FDN0IsZUFBZSxFQUNmO1lBQ0ksT0FBTztTQUNWLENBQ0osQ0FBQztJQUNOLENBQUM7SUFFRCxRQUFRLENBQUMsRUFBVTtRQUNmLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQXdELFNBQVMsRUFBRTtZQUNoRyxFQUFFO1NBQ0wsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELGVBQWUsQ0FBQyxF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LEVBQUUsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUFFRCwyQkFBMkIsQ0FBQyxPQUFlLEVBQUUsS0FBaUM7UUFDMUUsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FHaEMsbUNBQW1DLEVBQUUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBRUQsMkJBQTJCLENBQUMsT0FBZSxFQUFFLFVBQWtCO1FBQzNELE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBR2hDLGdDQUFnQyxFQUFFLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELDhCQUE4QixDQUFDLE9BQWUsRUFBRSxVQUFrQjtRQUM5RCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUdoQyxtQ0FBbUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFFRCxvQ0FBb0MsQ0FBQyxPQUFlO1FBQ2hELE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBRy9CLHFDQUFxQyxFQUFFLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsMkJBQTJCLENBQUMsT0FBZSxFQUFFLGdCQUF3QjtRQUNqRSxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUdoQywrQkFBK0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUM7SUFDdEUsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ29kZWdlbiBmcm9tICcuLi8uLi9jb21tb24vZ2VuZXJhdGVkLXR5cGVzJztcclxuaW1wb3J0IHtcclxuICAgIEFERF9JVEVNX1RPX0RSQUZUX09SREVSLFxyXG4gICAgQUREX01BTlVBTF9QQVlNRU5UX1RPX09SREVSLFxyXG4gICAgQUREX05PVEVfVE9fT1JERVIsXHJcbiAgICBBREpVU1RfRFJBRlRfT1JERVJfTElORSxcclxuICAgIEFQUExZX0NPVVBPTl9DT0RFX1RPX0RSQUZUX09SREVSLFxyXG4gICAgQ0FOQ0VMX09SREVSLFxyXG4gICAgQ0FOQ0VMX1BBWU1FTlQsXHJcbiAgICBDUkVBVEVfRFJBRlRfT1JERVIsXHJcbiAgICBDUkVBVEVfRlVMRklMTE1FTlQsXHJcbiAgICBERUxFVEVfRFJBRlRfT1JERVIsXHJcbiAgICBERUxFVEVfT1JERVJfTk9URSxcclxuICAgIERSQUZUX09SREVSX0VMSUdJQkxFX1NISVBQSU5HX01FVEhPRFMsXHJcbiAgICBHRVRfT1JERVIsXHJcbiAgICBHRVRfT1JERVJfSElTVE9SWSxcclxuICAgIEdFVF9PUkRFUlNfTElTVCxcclxuICAgIE1PRElGWV9PUkRFUixcclxuICAgIFJFRlVORF9PUkRFUixcclxuICAgIFJFTU9WRV9DT1VQT05fQ09ERV9GUk9NX0RSQUZUX09SREVSLFxyXG4gICAgUkVNT1ZFX0RSQUZUX09SREVSX0xJTkUsXHJcbiAgICBTRVRfQklMTElOR19BRERSRVNTX0ZPUl9EUkFGVF9PUkRFUixcclxuICAgIFNFVF9DVVNUT01FUl9GT1JfRFJBRlRfT1JERVIsXHJcbiAgICBTRVRfRFJBRlRfT1JERVJfU0hJUFBJTkdfTUVUSE9ELFxyXG4gICAgU0VUX1NISVBQSU5HX0FERFJFU1NfRk9SX0RSQUZUX09SREVSLFxyXG4gICAgU0VUVExFX1BBWU1FTlQsXHJcbiAgICBTRVRUTEVfUkVGVU5ELFxyXG4gICAgVFJBTlNJVElPTl9GVUxGSUxMTUVOVF9UT19TVEFURSxcclxuICAgIFRSQU5TSVRJT05fT1JERVJfVE9fU1RBVEUsXHJcbiAgICBUUkFOU0lUSU9OX1BBWU1FTlRfVE9fU1RBVEUsXHJcbiAgICBVUERBVEVfT1JERVJfQ1VTVE9NX0ZJRUxEUyxcclxuICAgIFVQREFURV9PUkRFUl9OT1RFLFxyXG59IGZyb20gJy4uL2RlZmluaXRpb25zL29yZGVyLWRlZmluaXRpb25zJztcclxuXHJcbmltcG9ydCB7IEJhc2VEYXRhU2VydmljZSB9IGZyb20gJy4vYmFzZS1kYXRhLnNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE9yZGVyRGF0YVNlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBiYXNlRGF0YVNlcnZpY2U6IEJhc2VEYXRhU2VydmljZSkge31cclxuXHJcbiAgICBnZXRPcmRlcnMob3B0aW9uczogQ29kZWdlbi5PcmRlckxpc3RPcHRpb25zID0geyB0YWtlOiAxMCB9KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PENvZGVnZW4uR2V0T3JkZXJMaXN0UXVlcnksIENvZGVnZW4uR2V0T3JkZXJMaXN0UXVlcnlWYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBHRVRfT1JERVJTX0xJU1QsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRPcmRlcihpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PENvZGVnZW4uR2V0T3JkZXJRdWVyeSwgQ29kZWdlbi5HZXRPcmRlclF1ZXJ5VmFyaWFibGVzPihHRVRfT1JERVIsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0T3JkZXJIaXN0b3J5KGlkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb2RlZ2VuLkhpc3RvcnlFbnRyeUxpc3RPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkdldE9yZGVySGlzdG9yeVF1ZXJ5LFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkdldE9yZGVySGlzdG9yeVF1ZXJ5VmFyaWFibGVzXHJcbiAgICAgICAgPihHRVRfT1JERVJfSElTVE9SWSwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR0bGVQYXltZW50KGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlNldHRsZVBheW1lbnRNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXR0bGVQYXltZW50TXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFNFVFRMRV9QQVlNRU5ULCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbFBheW1lbnQoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uQ2FuY2VsUGF5bWVudE11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkNhbmNlbFBheW1lbnRNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oQ0FOQ0VMX1BBWU1FTlQsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNpdGlvblBheW1lbnRUb1N0YXRlKGlkOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlRyYW5zaXRpb25QYXltZW50VG9TdGF0ZU11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlRyYW5zaXRpb25QYXltZW50VG9TdGF0ZU11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihUUkFOU0lUSU9OX1BBWU1FTlRfVE9fU1RBVEUsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIHN0YXRlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUZ1bGZpbGxtZW50KGlucHV0OiBDb2RlZ2VuLkZ1bGZpbGxPcmRlcklucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5DcmVhdGVGdWxmaWxsbWVudE11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkNyZWF0ZUZ1bGZpbGxtZW50TXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KENSRUFURV9GVUxGSUxMTUVOVCwge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2l0aW9uRnVsZmlsbG1lbnRUb1N0YXRlKGlkOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlRyYW5zaXRpb25GdWxmaWxsbWVudFRvU3RhdGVNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5UcmFuc2l0aW9uRnVsZmlsbG1lbnRUb1N0YXRlTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFRSQU5TSVRJT05fRlVMRklMTE1FTlRfVE9fU1RBVEUsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIHN0YXRlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbE9yZGVyKGlucHV0OiBDb2RlZ2VuLkNhbmNlbE9yZGVySW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENvZGVnZW4uQ2FuY2VsT3JkZXJNdXRhdGlvbiwgQ29kZWdlbi5DYW5jZWxPcmRlck11dGF0aW9uVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQ0FOQ0VMX09SREVSLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnVuZE9yZGVyKGlucHV0OiBDb2RlZ2VuLlJlZnVuZE9yZGVySW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENvZGVnZW4uUmVmdW5kT3JkZXJNdXRhdGlvbiwgQ29kZWdlbi5SZWZ1bmRPcmRlck11dGF0aW9uVmFyaWFibGVzPihcclxuICAgICAgICAgICAgUkVGVU5EX09SREVSLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldHRsZVJlZnVuZChpbnB1dDogQ29kZWdlbi5TZXR0bGVSZWZ1bmRJbnB1dCwgb3JkZXJJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXR0bGVSZWZ1bmRNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXR0bGVSZWZ1bmRNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oU0VUVExFX1JFRlVORCwge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGROb3RlVG9PcmRlcihpbnB1dDogQ29kZWdlbi5BZGROb3RlVG9PcmRlcklucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5BZGROb3RlVG9PcmRlck11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkFkZE5vdGVUb09yZGVyTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KEFERF9OT1RFX1RPX09SREVSLCB7XHJcbiAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU9yZGVyTm90ZShpbnB1dDogQ29kZWdlbi5VcGRhdGVPcmRlck5vdGVJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uVXBkYXRlT3JkZXJOb3RlTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uVXBkYXRlT3JkZXJOb3RlTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFVQREFURV9PUkRFUl9OT1RFLCB7XHJcbiAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZU9yZGVyTm90ZShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5EZWxldGVPcmRlck5vdGVNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5EZWxldGVPcmRlck5vdGVNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oREVMRVRFX09SREVSX05PVEUsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNpdGlvblRvU3RhdGUoaWQ6IHN0cmluZywgc3RhdGU6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uVHJhbnNpdGlvbk9yZGVyVG9TdGF0ZU11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlRyYW5zaXRpb25PcmRlclRvU3RhdGVNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oVFJBTlNJVElPTl9PUkRFUl9UT19TVEFURSwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlT3JkZXJDdXN0b21GaWVsZHMoaW5wdXQ6IENvZGVnZW4uVXBkYXRlT3JkZXJJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uVXBkYXRlT3JkZXJDdXN0b21GaWVsZHNNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5VcGRhdGVPcmRlckN1c3RvbUZpZWxkc011dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihVUERBVEVfT1JERVJfQ1VTVE9NX0ZJRUxEUywge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBtb2RpZnlPcmRlcihpbnB1dDogQ29kZWdlbi5Nb2RpZnlPcmRlcklucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDb2RlZ2VuLk1vZGlmeU9yZGVyTXV0YXRpb24sIENvZGVnZW4uTW9kaWZ5T3JkZXJNdXRhdGlvblZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIE1PRElGWV9PUkRFUixcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRNYW51YWxQYXltZW50VG9PcmRlcihpbnB1dDogQ29kZWdlbi5NYW51YWxQYXltZW50SW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkFkZE1hbnVhbFBheW1lbnRNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5BZGRNYW51YWxQYXltZW50TXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KEFERF9NQU5VQUxfUEFZTUVOVF9UT19PUkRFUiwgeyBpbnB1dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVEcmFmdE9yZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q29kZWdlbi5DcmVhdGVEcmFmdE9yZGVyTXV0YXRpb24+KENSRUFURV9EUkFGVF9PUkRFUik7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlRHJhZnRPcmRlcihvcmRlcklkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkRlbGV0ZURyYWZ0T3JkZXJNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5EZWxldGVEcmFmdE9yZGVyTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KERFTEVURV9EUkFGVF9PUkRFUiwgeyBvcmRlcklkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW1Ub0RyYWZ0T3JkZXIob3JkZXJJZDogc3RyaW5nLCBpbnB1dDogQ29kZWdlbi5BZGRJdGVtVG9EcmFmdE9yZGVySW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkFkZEl0ZW1Ub0RyYWZ0T3JkZXJNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5BZGRJdGVtVG9EcmFmdE9yZGVyTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KEFERF9JVEVNX1RPX0RSQUZUX09SREVSLCB7IG9yZGVySWQsIGlucHV0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkanVzdERyYWZ0T3JkZXJMaW5lKG9yZGVySWQ6IHN0cmluZywgaW5wdXQ6IENvZGVnZW4uQWRqdXN0RHJhZnRPcmRlckxpbmVJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uQWRqdXN0RHJhZnRPcmRlckxpbmVNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5BZGp1c3REcmFmdE9yZGVyTGluZU11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihBREpVU1RfRFJBRlRfT1JERVJfTElORSwgeyBvcmRlcklkLCBpbnB1dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVEcmFmdE9yZGVyTGluZShvcmRlcklkOiBzdHJpbmcsIG9yZGVyTGluZUlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlJlbW92ZURyYWZ0T3JkZXJMaW5lTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uUmVtb3ZlRHJhZnRPcmRlckxpbmVNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oUkVNT1ZFX0RSQUZUX09SREVSX0xJTkUsIHsgb3JkZXJJZCwgb3JkZXJMaW5lSWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q3VzdG9tZXJGb3JEcmFmdE9yZGVyKFxyXG4gICAgICAgIG9yZGVySWQ6IHN0cmluZyxcclxuICAgICAgICB7IGN1c3RvbWVySWQsIGlucHV0IH06IHsgY3VzdG9tZXJJZD86IHN0cmluZzsgaW5wdXQ/OiBDb2RlZ2VuLkNyZWF0ZUN1c3RvbWVySW5wdXQgfSxcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0Q3VzdG9tZXJGb3JEcmFmdE9yZGVyTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0Q3VzdG9tZXJGb3JEcmFmdE9yZGVyTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFNFVF9DVVNUT01FUl9GT1JfRFJBRlRfT1JERVIsIHsgb3JkZXJJZCwgY3VzdG9tZXJJZCwgaW5wdXQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RHJhZnRPcmRlclNoaXBwaW5nQWRkcmVzcyhvcmRlcklkOiBzdHJpbmcsIGlucHV0OiBDb2RlZ2VuLkNyZWF0ZUFkZHJlc3NJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0RHJhZnRPcmRlclNoaXBwaW5nQWRkcmVzc011dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlNldERyYWZ0T3JkZXJTaGlwcGluZ0FkZHJlc3NNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oU0VUX1NISVBQSU5HX0FERFJFU1NfRk9SX0RSQUZUX09SREVSLCB7IG9yZGVySWQsIGlucHV0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERyYWZ0T3JkZXJCaWxsaW5nQWRkcmVzcyhvcmRlcklkOiBzdHJpbmcsIGlucHV0OiBDb2RlZ2VuLkNyZWF0ZUFkZHJlc3NJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0RHJhZnRPcmRlckJpbGxpbmdBZGRyZXNzTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0RHJhZnRPcmRlckJpbGxpbmdBZGRyZXNzTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFNFVF9CSUxMSU5HX0FERFJFU1NfRk9SX0RSQUZUX09SREVSLCB7IG9yZGVySWQsIGlucHV0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGx5Q291cG9uQ29kZVRvRHJhZnRPcmRlcihvcmRlcklkOiBzdHJpbmcsIGNvdXBvbkNvZGU6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uQXBwbHlDb3Vwb25Db2RlVG9EcmFmdE9yZGVyTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uQXBwbHlDb3Vwb25Db2RlVG9EcmFmdE9yZGVyTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KEFQUExZX0NPVVBPTl9DT0RFX1RPX0RSQUZUX09SREVSLCB7IG9yZGVySWQsIGNvdXBvbkNvZGUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ291cG9uQ29kZUZyb21EcmFmdE9yZGVyKG9yZGVySWQ6IHN0cmluZywgY291cG9uQ29kZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5SZW1vdmVDb3Vwb25Db2RlRnJvbURyYWZ0T3JkZXJNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5SZW1vdmVDb3Vwb25Db2RlRnJvbURyYWZ0T3JkZXJNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oUkVNT1ZFX0NPVVBPTl9DT0RFX0ZST01fRFJBRlRfT1JERVIsIHsgb3JkZXJJZCwgY291cG9uQ29kZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREcmFmdE9yZGVyRWxpZ2libGVTaGlwcGluZ01ldGhvZHMob3JkZXJJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkRyYWZ0T3JkZXJFbGlnaWJsZVNoaXBwaW5nTWV0aG9kc1F1ZXJ5LFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkRyYWZ0T3JkZXJFbGlnaWJsZVNoaXBwaW5nTWV0aG9kc1F1ZXJ5VmFyaWFibGVzXHJcbiAgICAgICAgPihEUkFGVF9PUkRFUl9FTElHSUJMRV9TSElQUElOR19NRVRIT0RTLCB7IG9yZGVySWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RHJhZnRPcmRlclNoaXBwaW5nTWV0aG9kKG9yZGVySWQ6IHN0cmluZywgc2hpcHBpbmdNZXRob2RJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXREcmFmdE9yZGVyU2hpcHBpbmdNZXRob2RNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXREcmFmdE9yZGVyU2hpcHBpbmdNZXRob2RNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oU0VUX0RSQUZUX09SREVSX1NISVBQSU5HX01FVEhPRCwgeyBvcmRlcklkLCBzaGlwcGluZ01ldGhvZElkIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==