import { Component, Input, ViewChild, ViewContainerRef } from '@angular/core';
import { map } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../../data/providers/data.service";
import * as i2 from "../../../providers/custom-field-component/custom-field-component.service";
import * as i3 from "@clr/angular";
import * as i4 from "@angular/common";
import * as i5 from "@angular/forms";
import * as i6 from "../form-field/form-field.component";
import * as i7 from "../help-tooltip/help-tooltip.component";
import * as i8 from "../../dynamic-form-inputs/dynamic-form-input/dynamic-form-input.component";
import * as i9 from "../../pipes/custom-field-label.pipe";
import * as i10 from "../../pipes/custom-field-description.pipe";
/**
 * This component renders the appropriate type of form input control based
 * on the "type" property of the provided CustomFieldConfig.
 */
export class CustomFieldControlComponent {
    constructor(dataService, customFieldComponentService) {
        this.dataService = dataService;
        this.customFieldComponentService = customFieldComponentService;
        this.compact = false;
        this.showLabel = true;
        this.readonly = false;
        this.hasCustomControl = false;
    }
    ngOnInit() {
        this.uiLanguage$ = this.dataService.client
            .uiState()
            .stream$.pipe(map(({ uiState }) => uiState.language));
    }
    getFieldDefinition() {
        const config = {
            ...this.customField,
        };
        const id = this.customFieldComponentService.customFieldComponentExists(this.entityName, this.customField.name);
        if (id) {
            config.ui = { component: id };
        }
        switch (config.__typename) {
            case 'IntCustomFieldConfig':
                return {
                    ...config,
                    min: config.intMin,
                    max: config.intMax,
                    step: config.intStep,
                };
            case 'FloatCustomFieldConfig':
                return {
                    ...config,
                    min: config.floatMin,
                    max: config.floatMax,
                    step: config.floatStep,
                };
            case 'DateTimeCustomFieldConfig':
                return {
                    ...config,
                    min: config.datetimeMin,
                    max: config.datetimeMax,
                    step: config.datetimeStep,
                };
            default:
                return {
                    ...config,
                };
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.2", ngImport: i0, type: CustomFieldControlComponent, deps: [{ token: i1.DataService }, { token: i2.CustomFieldComponentService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.2", type: CustomFieldControlComponent, selector: "vdr-custom-field-control", inputs: { entityName: "entityName", formGroup: ["customFieldsFormGroup", "formGroup"], customField: "customField", compact: "compact", showLabel: "showLabel", readonly: "readonly" }, viewQueries: [{ propertyName: "customComponentPlaceholder", first: true, predicate: ["customComponentPlaceholder"], descendants: true, read: ViewContainerRef }], ngImport: i0, template: "<div class=\"clr-form-control\" *ngIf=\"compact\">\r\n    <div class=\"flex\">\r\n        <label for=\"basic\" class=\"clr-control-label\"\r\n            >{{ customField | customFieldLabel: (uiLanguage$ | async) }}\r\n            <vdr-help-tooltip\r\n                *ngIf=\"customField | customFieldDescription: (uiLanguage$ | async) as description\"\r\n                [content]=\"description\"\r\n            ></vdr-help-tooltip>\r\n        </label>\r\n    </div>\r\n    <div class=\"clr-control-container\">\r\n        <div class=\"clr-input-wrapper\">\r\n            <ng-container *ngTemplateOutlet=\"inputs\"></ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n<vdr-form-field\r\n    [label]=\"customField | customFieldLabel: (uiLanguage$ | async)\"\r\n    [tooltip]=\"customField | customFieldDescription: (uiLanguage$ | async)\"\r\n    [for]=\"customField.name\"\r\n    *ngIf=\"!compact\"\r\n>\r\n    <ng-container *ngTemplateOutlet=\"inputs\"></ng-container>\r\n</vdr-form-field>\r\n\r\n<ng-template #inputs>\r\n    <ng-container [formGroup]=\"formGroup\">\r\n        <vdr-dynamic-form-input\r\n            [formControlName]=\"customField.name\"\r\n            [readonly]=\"readonly || customField.readonly\"\r\n            [control]=\"formGroup.get(customField.name)\"\r\n            [def]=\"getFieldDefinition()\"\r\n        >\r\n        </vdr-dynamic-form-input>\r\n    </ng-container>\r\n</ng-template>\r\n", styles: [":host{display:block;width:100%}:host .toggle-switch{margin-top:0;margin-bottom:0}\n"], dependencies: [{ kind: "directive", type: i3.ClrLabel, selector: "label", inputs: ["for"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i5.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i5.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i5.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i5.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "component", type: i6.FormFieldComponent, selector: "vdr-form-field", inputs: ["label", "for", "tooltip", "errors", "readOnlyToggle"] }, { kind: "component", type: i7.HelpTooltipComponent, selector: "vdr-help-tooltip", inputs: ["content", "position"] }, { kind: "component", type: i8.DynamicFormInputComponent, selector: "vdr-dynamic-form-input", inputs: ["def", "readonly", "control"] }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i9.CustomFieldLabelPipe, name: "customFieldLabel" }, { kind: "pipe", type: i10.CustomFieldDescriptionPipe, name: "customFieldDescription" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.2", ngImport: i0, type: CustomFieldControlComponent, decorators: [{
            type: Component,
            args: [{ selector: 'vdr-custom-field-control', template: "<div class=\"clr-form-control\" *ngIf=\"compact\">\r\n    <div class=\"flex\">\r\n        <label for=\"basic\" class=\"clr-control-label\"\r\n            >{{ customField | customFieldLabel: (uiLanguage$ | async) }}\r\n            <vdr-help-tooltip\r\n                *ngIf=\"customField | customFieldDescription: (uiLanguage$ | async) as description\"\r\n                [content]=\"description\"\r\n            ></vdr-help-tooltip>\r\n        </label>\r\n    </div>\r\n    <div class=\"clr-control-container\">\r\n        <div class=\"clr-input-wrapper\">\r\n            <ng-container *ngTemplateOutlet=\"inputs\"></ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n<vdr-form-field\r\n    [label]=\"customField | customFieldLabel: (uiLanguage$ | async)\"\r\n    [tooltip]=\"customField | customFieldDescription: (uiLanguage$ | async)\"\r\n    [for]=\"customField.name\"\r\n    *ngIf=\"!compact\"\r\n>\r\n    <ng-container *ngTemplateOutlet=\"inputs\"></ng-container>\r\n</vdr-form-field>\r\n\r\n<ng-template #inputs>\r\n    <ng-container [formGroup]=\"formGroup\">\r\n        <vdr-dynamic-form-input\r\n            [formControlName]=\"customField.name\"\r\n            [readonly]=\"readonly || customField.readonly\"\r\n            [control]=\"formGroup.get(customField.name)\"\r\n            [def]=\"getFieldDefinition()\"\r\n        >\r\n        </vdr-dynamic-form-input>\r\n    </ng-container>\r\n</ng-template>\r\n", styles: [":host{display:block;width:100%}:host .toggle-switch{margin-top:0;margin-bottom:0}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.DataService }, { type: i2.CustomFieldComponentService }]; }, propDecorators: { entityName: [{
                type: Input
            }], formGroup: [{
                type: Input,
                args: ['customFieldsFormGroup']
            }], customField: [{
                type: Input
            }], compact: [{
                type: Input
            }], showLabel: [{
                type: Input
            }], readonly: [{
                type: Input
            }], customComponentPlaceholder: [{
                type: ViewChild,
                args: ['customComponentPlaceholder', { read: ViewContainerRef }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tLWZpZWxkLWNvbnRyb2wuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9zaGFyZWQvY29tcG9uZW50cy9jdXN0b20tZmllbGQtY29udHJvbC9jdXN0b20tZmllbGQtY29udHJvbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvcmUvc3JjL3NoYXJlZC9jb21wb25lbnRzL2N1c3RvbS1maWVsZC1jb250cm9sL2N1c3RvbS1maWVsZC1jb250cm9sLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQW9CLEtBQUssRUFBVSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHeEcsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7Ozs7Ozs7QUFXckM7OztHQUdHO0FBTUgsTUFBTSxPQUFPLDJCQUEyQjtJQWNwQyxZQUNZLFdBQXdCLEVBQ3hCLDJCQUF3RDtRQUR4RCxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixnQ0FBMkIsR0FBM0IsMkJBQTJCLENBQTZCO1FBWjNELFlBQU8sR0FBRyxLQUFLLENBQUM7UUFDaEIsY0FBUyxHQUFHLElBQUksQ0FBQztRQUNqQixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQzFCLHFCQUFnQixHQUFHLEtBQUssQ0FBQztJQVV0QixDQUFDO0lBRUosUUFBUTtRQUNKLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNO2FBQ3JDLE9BQU8sRUFBRTthQUNULE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQUVELGtCQUFrQjtRQUNkLE1BQU0sTUFBTSxHQUF5RDtZQUNqRSxHQUFHLElBQUksQ0FBQyxXQUFXO1NBQ3RCLENBQUM7UUFDRixNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsMkJBQTJCLENBQUMsMEJBQTBCLENBQ2xFLElBQUksQ0FBQyxVQUFVLEVBQ2YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQ3hCLENBQUM7UUFDRixJQUFJLEVBQUUsRUFBRTtZQUNKLE1BQU0sQ0FBQyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUM7U0FDakM7UUFDRCxRQUFRLE1BQU0sQ0FBQyxVQUFVLEVBQUU7WUFDdkIsS0FBSyxzQkFBc0I7Z0JBQ3ZCLE9BQU87b0JBQ0gsR0FBRyxNQUFNO29CQUNULEdBQUcsRUFBRSxNQUFNLENBQUMsTUFBTTtvQkFDbEIsR0FBRyxFQUFFLE1BQU0sQ0FBQyxNQUFNO29CQUNsQixJQUFJLEVBQUUsTUFBTSxDQUFDLE9BQU87aUJBQ3ZCLENBQUM7WUFDTixLQUFLLHdCQUF3QjtnQkFDekIsT0FBTztvQkFDSCxHQUFHLE1BQU07b0JBQ1QsR0FBRyxFQUFFLE1BQU0sQ0FBQyxRQUFRO29CQUNwQixHQUFHLEVBQUUsTUFBTSxDQUFDLFFBQVE7b0JBQ3BCLElBQUksRUFBRSxNQUFNLENBQUMsU0FBUztpQkFDekIsQ0FBQztZQUNOLEtBQUssMkJBQTJCO2dCQUM1QixPQUFPO29CQUNILEdBQUcsTUFBTTtvQkFDVCxHQUFHLEVBQUUsTUFBTSxDQUFDLFdBQVc7b0JBQ3ZCLEdBQUcsRUFBRSxNQUFNLENBQUMsV0FBVztvQkFDdkIsSUFBSSxFQUFFLE1BQU0sQ0FBQyxZQUFZO2lCQUM1QixDQUFDO1lBQ047Z0JBQ0ksT0FBTztvQkFDSCxHQUFHLE1BQU07aUJBQ1osQ0FBQztTQUNUO0lBQ0wsQ0FBQzs4R0EvRFEsMkJBQTJCO2tHQUEzQiwyQkFBMkIsNFdBUWEsZ0JBQWdCLDZCQy9CckUsczVDQW9DQTs7MkZEYmEsMkJBQTJCO2tCQUx2QyxTQUFTOytCQUNJLDBCQUEwQjs0SUFLM0IsVUFBVTtzQkFBbEIsS0FBSztnQkFDMEIsU0FBUztzQkFBeEMsS0FBSzt1QkFBQyx1QkFBdUI7Z0JBQ3JCLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFHRSwwQkFBMEI7c0JBRGpDLFNBQVM7dUJBQUMsNEJBQTRCLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudEZhY3RvcnksIElucHV0LCBPbkluaXQsIFZpZXdDaGlsZCwgVmlld0NvbnRhaW5lclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBVbnR5cGVkRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmltcG9ydCB7IElucHV0Q29tcG9uZW50Q29uZmlnIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2NvbXBvbmVudC1yZWdpc3RyeS10eXBlcyc7XHJcbmltcG9ydCB7IEN1c3RvbUZpZWxkQ29uZmlnLCBDdXN0b21GaWVsZHNGcmFnbWVudCwgTGFuZ3VhZ2VDb2RlIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2dlbmVyYXRlZC10eXBlcyc7XHJcbmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vZGF0YS9wcm92aWRlcnMvZGF0YS5zZXJ2aWNlJztcclxuaW1wb3J0IHtcclxuICAgIEN1c3RvbUZpZWxkQ29tcG9uZW50U2VydmljZSxcclxuICAgIEN1c3RvbUZpZWxkQ29udHJvbCxcclxuICAgIEN1c3RvbUZpZWxkRW50aXR5TmFtZSxcclxufSBmcm9tICcuLi8uLi8uLi9wcm92aWRlcnMvY3VzdG9tLWZpZWxkLWNvbXBvbmVudC9jdXN0b20tZmllbGQtY29tcG9uZW50LnNlcnZpY2UnO1xyXG5cclxuLyoqXHJcbiAqIFRoaXMgY29tcG9uZW50IHJlbmRlcnMgdGhlIGFwcHJvcHJpYXRlIHR5cGUgb2YgZm9ybSBpbnB1dCBjb250cm9sIGJhc2VkXHJcbiAqIG9uIHRoZSBcInR5cGVcIiBwcm9wZXJ0eSBvZiB0aGUgcHJvdmlkZWQgQ3VzdG9tRmllbGRDb25maWcuXHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndmRyLWN1c3RvbS1maWVsZC1jb250cm9sJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9jdXN0b20tZmllbGQtY29udHJvbC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9jdXN0b20tZmllbGQtY29udHJvbC5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ3VzdG9tRmllbGRDb250cm9sQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIEBJbnB1dCgpIGVudGl0eU5hbWU6IEN1c3RvbUZpZWxkRW50aXR5TmFtZTtcclxuICAgIEBJbnB1dCgnY3VzdG9tRmllbGRzRm9ybUdyb3VwJykgZm9ybUdyb3VwOiBVbnR5cGVkRm9ybUdyb3VwO1xyXG4gICAgQElucHV0KCkgY3VzdG9tRmllbGQ6IEN1c3RvbUZpZWxkc0ZyYWdtZW50O1xyXG4gICAgQElucHV0KCkgY29tcGFjdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgc2hvd0xhYmVsID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgICBoYXNDdXN0b21Db250cm9sID0gZmFsc2U7XHJcbiAgICBAVmlld0NoaWxkKCdjdXN0b21Db21wb25lbnRQbGFjZWhvbGRlcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgcHJpdmF0ZSBjdXN0b21Db21wb25lbnRQbGFjZWhvbGRlcjogVmlld0NvbnRhaW5lclJlZjtcclxuXHJcbiAgICBwcml2YXRlIGN1c3RvbUNvbXBvbmVudEZhY3Rvcnk6IENvbXBvbmVudEZhY3Rvcnk8Q3VzdG9tRmllbGRDb250cm9sPiB8IHVuZGVmaW5lZDtcclxuICAgIHVpTGFuZ3VhZ2UkOiBPYnNlcnZhYmxlPExhbmd1YWdlQ29kZT47XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBkYXRhU2VydmljZTogRGF0YVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBjdXN0b21GaWVsZENvbXBvbmVudFNlcnZpY2U6IEN1c3RvbUZpZWxkQ29tcG9uZW50U2VydmljZSxcclxuICAgICkge31cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLnVpTGFuZ3VhZ2UkID0gdGhpcy5kYXRhU2VydmljZS5jbGllbnRcclxuICAgICAgICAgICAgLnVpU3RhdGUoKVxyXG4gICAgICAgICAgICAuc3RyZWFtJC5waXBlKG1hcCgoeyB1aVN0YXRlIH0pID0+IHVpU3RhdGUubGFuZ3VhZ2UpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGaWVsZERlZmluaXRpb24oKTogQ3VzdG9tRmllbGRDb25maWcgJiB7IHVpPzogSW5wdXRDb21wb25lbnRDb25maWcgfSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnOiBDdXN0b21GaWVsZHNGcmFnbWVudCAmIHsgdWk/OiBJbnB1dENvbXBvbmVudENvbmZpZyB9ID0ge1xyXG4gICAgICAgICAgICAuLi50aGlzLmN1c3RvbUZpZWxkLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmN1c3RvbUZpZWxkQ29tcG9uZW50U2VydmljZS5jdXN0b21GaWVsZENvbXBvbmVudEV4aXN0cyhcclxuICAgICAgICAgICAgdGhpcy5lbnRpdHlOYW1lLFxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbUZpZWxkLm5hbWUsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgY29uZmlnLnVpID0geyBjb21wb25lbnQ6IGlkIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoY29uZmlnLl9fdHlwZW5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSAnSW50Q3VzdG9tRmllbGRDb25maWcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluOiBjb25maWcuaW50TWluLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heDogY29uZmlnLmludE1heCxcclxuICAgICAgICAgICAgICAgICAgICBzdGVwOiBjb25maWcuaW50U3RlcCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNhc2UgJ0Zsb2F0Q3VzdG9tRmllbGRDb25maWcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluOiBjb25maWcuZmxvYXRNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBjb25maWcuZmxvYXRNYXgsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcDogY29uZmlnLmZsb2F0U3RlcCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNhc2UgJ0RhdGVUaW1lQ3VzdG9tRmllbGRDb25maWcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluOiBjb25maWcuZGF0ZXRpbWVNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBjb25maWcuZGF0ZXRpbWVNYXgsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcDogY29uZmlnLmRhdGV0aW1lU3RlcCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmNvbmZpZyxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJjbHItZm9ybS1jb250cm9sXCIgKm5nSWY9XCJjb21wYWN0XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiZmxleFwiPlxyXG4gICAgICAgIDxsYWJlbCBmb3I9XCJiYXNpY1wiIGNsYXNzPVwiY2xyLWNvbnRyb2wtbGFiZWxcIlxyXG4gICAgICAgICAgICA+e3sgY3VzdG9tRmllbGQgfCBjdXN0b21GaWVsZExhYmVsOiAodWlMYW5ndWFnZSQgfCBhc3luYykgfX1cclxuICAgICAgICAgICAgPHZkci1oZWxwLXRvb2x0aXBcclxuICAgICAgICAgICAgICAgICpuZ0lmPVwiY3VzdG9tRmllbGQgfCBjdXN0b21GaWVsZERlc2NyaXB0aW9uOiAodWlMYW5ndWFnZSQgfCBhc3luYykgYXMgZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgICAgICAgW2NvbnRlbnRdPVwiZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgICA+PC92ZHItaGVscC10b29sdGlwPlxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJjbHItY29udHJvbC1jb250YWluZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2xyLWlucHV0LXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImlucHV0c1wiPjwvbmctY29udGFpbmVyPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG48dmRyLWZvcm0tZmllbGRcclxuICAgIFtsYWJlbF09XCJjdXN0b21GaWVsZCB8IGN1c3RvbUZpZWxkTGFiZWw6ICh1aUxhbmd1YWdlJCB8IGFzeW5jKVwiXHJcbiAgICBbdG9vbHRpcF09XCJjdXN0b21GaWVsZCB8IGN1c3RvbUZpZWxkRGVzY3JpcHRpb246ICh1aUxhbmd1YWdlJCB8IGFzeW5jKVwiXHJcbiAgICBbZm9yXT1cImN1c3RvbUZpZWxkLm5hbWVcIlxyXG4gICAgKm5nSWY9XCIhY29tcGFjdFwiXHJcbj5cclxuICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJpbnB1dHNcIj48L25nLWNvbnRhaW5lcj5cclxuPC92ZHItZm9ybS1maWVsZD5cclxuXHJcbjxuZy10ZW1wbGF0ZSAjaW5wdXRzPlxyXG4gICAgPG5nLWNvbnRhaW5lciBbZm9ybUdyb3VwXT1cImZvcm1Hcm91cFwiPlxyXG4gICAgICAgIDx2ZHItZHluYW1pYy1mb3JtLWlucHV0XHJcbiAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwiY3VzdG9tRmllbGQubmFtZVwiXHJcbiAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seSB8fCBjdXN0b21GaWVsZC5yZWFkb25seVwiXHJcbiAgICAgICAgICAgIFtjb250cm9sXT1cImZvcm1Hcm91cC5nZXQoY3VzdG9tRmllbGQubmFtZSlcIlxyXG4gICAgICAgICAgICBbZGVmXT1cImdldEZpZWxkRGVmaW5pdGlvbigpXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgPC92ZHItZHluYW1pYy1mb3JtLWlucHV0PlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbjwvbmctdGVtcGxhdGU+XHJcbiJdfQ==