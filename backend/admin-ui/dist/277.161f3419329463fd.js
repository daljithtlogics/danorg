"use strict";(self.webpackChunkvendure_admin=self.webpackChunkvendure_admin||[]).push([[277],{6277:(L,h,o)=>{o.r(h),o.d(h,{LoginComponent:()=>s,LoginGuard:()=>l,LoginModule:()=>m,loginRoutes:()=>u});var n=o(4386),a=o(6058),d=o(2583),w=o(7589),p=o(2493),f=o(3740),g=o(9348),M=o(7062),x=o(4369);function C(t,r){if(1&t&&(n.TgZ(0,"p",22),n._uU(1," Photo by "),n.TgZ(2,"a",23),n._uU(3),n.qZA(),n._uU(4," on "),n.TgZ(5,"a",23),n._uU(6,"Unsplash"),n.qZA()()),2&t){const e=n.oxw();n.xp6(2),n.Q6J("href",e.imageCreatorUrl,n.LSH),n.xp6(1),n.Oqu(e.imageCreator),n.xp6(2),n.Q6J("href",e.imageUnsplashUrl,n.LSH)}}function O(t,r){if(1&t&&(n.TgZ(0,"p",24),n._uU(1),n.qZA()),2&t){const e=n.oxw();n.xp6(1),n.Oqu(e.imageLocation)}}function P(t,r){if(1&t&&n._UZ(0,"img",25),2&t){const e=n.oxw();n.Q6J("src",e.imageUrl,n.LSH)("alt",e.imageUrl)}}function b(t,r){1&t&&(n.TgZ(0,"span"),n._uU(1,"-"),n.qZA())}function v(t,r){if(1&t&&(n.TgZ(0,"span"),n._uU(1),n.YNc(2,b,2,0,"span",20),n.qZA()),2&t){const e=n.oxw();n.xp6(1),n.hij("",e.brand," "),n.xp6(1),n.Q6J("ngIf",!e.hideVendureBranding||!e.hideVersion)}}function y(t,r){1&t&&(n.TgZ(0,"span"),n._uU(1,"vendure"),n.qZA())}function E(t,r){if(1&t&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&t){const e=n.oxw();n.xp6(1),n.hij("v",e.version,"")}}function U(t,r){1&t&&n._UZ(0,"img",26)}const I=function(t){return{brand:t}};class s{constructor(r,e,i){this.authService=r,this.router=e,this.httpClient=i,this.username="",this.password="",this.rememberMe=!1,this.version=a.s5M,this.brand=(0,a.hq7)().brand,this.hideVendureBranding=(0,a.hq7)().hideVendureBranding,this.hideVersion=(0,a.hq7)().hideVersion,this.customImageUrl=(0,a.hq7)().loginImageUrl,this.imageUrl="",this.imageUnsplashUrl="",this.imageLocation="",this.imageCreator="",this.imageCreatorUrl="",this.customImageUrl?this.imageUrl=this.customImageUrl:this.loadImage()}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(r=>{switch(r.__typename){case"CurrentUser":const e=this.getRedirectRoute();this.router.navigateByUrl(e||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=r.message}})}loadImage(){this.httpClient.get("https://login-image.vendure.io").toPromise().then(r=>{this.updateImage(r)})}updateImage(r){const e=r.user,i=r.location;this.imageUrl=r.urls.regular+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageCreator=e.name,this.imageLocation=i.name,this.imageCreatorUrl=e.links.html+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageUnsplashUrl=r.links.html}getRedirectRoute(){let r;const e=new RegExp(`${a.ONw}=(.*)`);try{const i=window.location.search.match(e);i&&1<i.length&&(r=atob(decodeURIComponent(i[1])))}catch{}return r}static#n=this.\u0275fac=function(e){return new(e||s)(n.Y36(a.e80),n.Y36(d.F0),n.Y36(w.eN))};static#e=this.\u0275cmp=n.Xpm({type:s,selectors:[["vdr-login"]],decls:39,vars:37,consts:[[1,"login-wrapper"],[1,"login-wrapper-inner"],[1,"login-wrapper-image"],[1,"login-wrapper-image-content"],[1,"login-wrapper-image-title"],[1,"login-wrapper-image-copyright"],["class","creator",4,"ngIf"],["class","location",4,"ngIf"],[3,"src","alt",4,"ngIf"],[1,"login-wrapper-form"],[1,"login-title"],[1,"login-form"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"button","primary","login-button",3,"disabled","click"],[1,"version"],[4,"ngIf"],["class","login-wrapper-logo","src","assets/logo-login.webp",4,"ngIf"],[1,"creator"],["target","_blank",3,"href"],[1,"location"],[3,"src","alt"],["src","assets/logo-login.webp",1,"login-wrapper-logo"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"div",5),n.YNc(8,C,7,3,"p",6),n.YNc(9,O,2,1,"p",7),n.qZA()(),n.YNc(10,P,1,2,"img",8),n.qZA(),n.TgZ(11,"div",9)(12,"p",10),n._uU(13),n.ALo(14,"translate"),n.qZA(),n.TgZ(15,"form",11)(16,"div",12)(17,"input",13),n.NdJ("ngModelChange",function(c){return i.username=c}),n.ALo(18,"translate"),n.qZA(),n.TgZ(19,"input",14),n.NdJ("ngModelChange",function(c){return i.password=c}),n.ALo(20,"translate"),n.qZA(),n.TgZ(21,"clr-alert",15)(22,"clr-alert-item")(23,"span",16),n._uU(24),n.qZA()()(),n.TgZ(25,"clr-checkbox-wrapper")(26,"input",17),n.NdJ("ngModelChange",function(c){return i.rememberMe=c}),n.qZA(),n.TgZ(27,"label"),n._uU(28),n.ALo(29,"translate"),n.qZA()(),n.TgZ(30,"div")(31,"button",18),n.NdJ("click",function(){return i.logIn()}),n._uU(32),n.ALo(33,"translate"),n.qZA()()(),n.TgZ(34,"div",19),n.YNc(35,v,3,2,"span",20),n.YNc(36,y,2,0,"span",20),n.YNc(37,E,2,1,"span",20),n.qZA()()(),n.YNc(38,U,1,0,"img",21),n.qZA()()),2&e&&(n.xp6(5),n.hij(" ",n.lcZ(6,22,"common.login-image-title")," "),n.xp6(3),n.Q6J("ngIf",i.imageCreator),n.xp6(1),n.Q6J("ngIf",i.imageLocation),n.xp6(1),n.Q6J("ngIf",i.imageUrl),n.xp6(3),n.hij(" ",n.xi3(14,24,"common.login-title",n.VKq(35,I,i.hideVendureBranding?i.brand:"Vendure"))," "),n.xp6(4),n.Q6J("ngModel",i.username)("placeholder",n.lcZ(18,27,"common.username")),n.xp6(2),n.Q6J("ngModel",i.password)("placeholder",n.lcZ(20,29,"common.password")),n.xp6(2),n.ekj("visible",i.errorMessage),n.Q6J("clrAlertType","danger")("clrAlertClosable",!1),n.xp6(3),n.hij(" ",i.errorMessage," "),n.xp6(2),n.Q6J("ngModel",i.rememberMe),n.xp6(2),n.Oqu(n.lcZ(29,31,"common.remember-me")),n.xp6(3),n.Q6J("disabled",!i.username||!i.password),n.xp6(1),n.hij(" ",n.lcZ(33,33,"common.login")," "),n.xp6(3),n.Q6J("ngIf",i.brand),n.xp6(1),n.Q6J("ngIf",!i.hideVendureBranding),n.xp6(1),n.Q6J("ngIf",!i.hideVersion),n.xp6(1),n.Q6J("ngIf",!i.hideVendureBranding))},dependencies:[p.TIm,p.CyW,p.I9z,p.MgK,p.KKC,p.PEh,f.O5,g._Y,g.Fj,g.Wl,g.JJ,g.JL,g.On,g.F,a.y_K,M.X$],styles:[".login-wrapper[_ngcontent-%COMP%]{background:var(--color-login-page-bg);background-image:none;height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{background:#fff;width:1120px;height:590px;display:flex;justify-content:flex-start;align-items:stretch;position:relative;border-radius:var(--border-radius);border:1px solid var(--color-weight-150);overflow:hidden}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{flex-direction:column;height:auto;width:100%}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:100%;flex-grow:1;position:relative}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:300px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover;object-position:center;position:relative;z-index:1}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;bottom:0;z-index:10;background:rgb(2,0,36);background:linear-gradient(180deg,rgba(2,0,36,0) 0%,rgba(0,0,0,.75) 100%);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end;padding:30px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin-bottom:20px}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.2rem}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]{opacity:.8}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6rem;color:#fff;margin:0!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:100%;width:400px;padding:40px;display:flex;flex-direction:column;align-items:stretch;justify-content:center;box-shadow:0 20px 25px #0000001a;overflow:hidden;border-radius:5px;flex-shrink:0}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:auto;width:100%;padding:20px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;margin-bottom:20px;color:var(--color-weight-600)}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.username[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.password[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:15px;padding:12px 16px!important;background:#fff;font-size:14px;line-height:22px;color:#52667a;outline:none;-webkit-appearance:none}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%!important;margin-top:20px!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-logo[_ngcontent-%COMP%]{width:60px;height:auto;position:absolute;right:20px;top:20px}.login-button[_ngcontent-%COMP%]{width:100%;margin-top:var(--space-unit);justify-content:center}.version[_ngcontent-%COMP%]{flex:1;flex-grow:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-inline-start:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;animation:_ngcontent-%COMP%_shake .82s cubic-bezier(.36,.07,.19,.97) both;animation-delay:.2s;transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}"]})}class l{constructor(r,e){this.router=r,this.authService=e}canActivate(r){return this.authService.checkAuthenticatedStatus().pipe((0,x.U)(e=>(e&&this.router.navigate(["/"]),!e)))}static#n=this.\u0275fac=function(e){return new(e||l)(n.LFG(d.F0),n.LFG(a.e80))};static#e=this.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}const u=[{path:"",component:s,pathMatch:"full",canActivate:[l]}];class m{static#n=this.\u0275fac=function(e){return new(e||m)};static#e=this.\u0275mod=n.oAB({type:m});static#r=this.\u0275inj=n.cJS({imports:[a.m81,d.Bz.forChild(u)]})}}}]);
//# sourceMappingURL=277.161f3419329463fd.js.map